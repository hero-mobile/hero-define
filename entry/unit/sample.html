<!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title></title> <script type="text/javascript">!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/hero-define/",t(0)}({0:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.DecoratePage=void 0;var a,l,u,s,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=n(8),d=n(7),g=n(118),b=o(g),_=n(19),w=o(_),v=(0,b.default)();t.DecoratePage=(a=(0,d.Entry)(),l=(0,p.Component)({view:v}),u=(0,p.Message)(),a(s=l((c=function(){function e(){r(this,e)}return f(e,[{key:"boot",value:function(){var e=w.default.getInitData();e.samples&&p.Hero.out({datas:[{name:"parent",subViews:[e]}]})}},{key:"payload",value:function(e){e.payload?(e.payload.desc=void 0,p.Hero.out({datas:{name:"test",text:JSON.stringify(e.payload,null,4)}}),e.payload.name="testing",p.Hero.out({datas:[e.payload]})):(e.click||"value"in e||e.name)&&p.Hero.out({datas:{name:"test",text:JSON.stringify(e,null,4)}}),e.appInfo&&p.Hero.out({datas:{name:"test",text:JSON.stringify(e,null,4)}}),"first"===e.click&&p.Hero.out({datas:[{name:"toast",text:"first"}]}),"second"===e.click&&p.Hero.out({datas:[{name:"toast",text:"second"}]}),e.channel&&p.Hero.out({datas:{name:"test",text:JSON.stringify(e,null,4)}}),"location"===e.get&&e.la&&e.lo&&p.Hero.out({datas:{name:"testing",coordinate:{la:e.la,lo:e.lo}}})}}]),e}(),i(c.prototype,"boot",[p.Boot],Object.getOwnPropertyDescriptor(c.prototype,"boot"),c.prototype),i(c.prototype,"payload",[u],Object.getOwnPropertyDescriptor(c.prototype,"payload"),c.prototype),s=c))||s)||s)},7:function(e,t){function n(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function o(e){return function(t){n(t,"__entryConfig",e)}}e.exports={Entry:o}},8:function(module,exports){function _mergeAttributes(e,t){if(t&&"object"==typeof t){var n,o=Object.keys(t);for(n=0;n<o.length;n++)e[o[n]]=t[o[n]];return e}}function view2Data(e){var t;if(e instanceof Array)for(t=0;t<e.length;t++)view2Data(e[t]);else e.subViews&&view2Data(e.subViews);e.name&&(window.ui2Data["_"+e.name]="",window.ui2Data.__defineSetter__(e.name,function(t){window.ui2Data["_"+e.name]=t;var n={name:e.name};if("string"==typeof t)n.text=t;else{if(_mergeAttributes(n,t),!t)return;if("object"!=typeof t)return;Object.keys(t).forEach(function(e){n[e]=t[e]})}Hero.out({datas:n})}),window.ui2Data.__defineGetter__(e.name,function(){return window.ui2Data["_"+e.name]}))}function sendMessage(e){var t;"IOS"===_deviceType?(_outObjects=e,t=document.createElement("iframe"),t.setAttribute("src","hero://ready"),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null):"ANDROID"===_deviceType?("object"==typeof e&&(e=JSON.stringify(e)),window.native.on(e)):window.Hero.page.on(e)}function loop(){}function outObjects(){var e="";return _outObjects&&(e="string"==typeof _outObjects?_outObjects:JSON.stringify(_outObjects),_outObjects=""),e}function __executeExpression(expression,data,page){return function(expression,__data,__page,window,Hero){var value=eval("expression");return value=eval(value)}(expression,data,page,null,null)}function onMessage(e){"string"==typeof e&&(e=JSON.parse(e)),e.name&&e.value&&(window.ui2Data["_"+e.name]=e.value),Hero.__beforeMessage.call(_currentPage,e),Hero.__messageList.forEach(function(t){var n=!1;"function"==typeof t.condition?n=t.condition.call(_currentPage,e):"boolean"==typeof t.condition&&(n=t.condition),n&&t.callback.call(_currentPage,e)}),Hero.__afterMessage.call(_currentPage,e)}function BeforeMessage(e,t,n){return Hero.__beforeMessage=e[t],n.writable=!1,n}function AfterMessage(e,t,n){return Hero.__afterMessage=e[t],n.writable=!1,n}function definePublicFreezeProp(e,t,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!1,writable:!1,value:n})}function defineProp(e,t,n,o){Object.defineProperty(e,t,{enumerable:!!o,configurable:!1,writable:!0,value:n})}function defineReadOnlyProp(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function resetUI(e){window.ui=e}function bootstrap(){"blank"!==window.ui&&sendMessage({ui:window.ui}),window.ui&&window.ui.views&&view2Data(window.ui.views),Hero.__boot.call(_currentPage)}function getDeviceType(){return _deviceType}function Component(e){return function(t){if(e||(e=emptyObject),e.view&&(defineProp(t,"__defaultViews",e.view),resetUI(e.view)),_currentPage=new t,"ANDROID"===getDeviceType()||"IOS"===getDeviceType())bootstrap();else{var n=" \n                                                                                                                                        \n                                                                                                                                        \n                                                                                                                                        \n                                                                                                                                        \n    @@@@@        @@@@@                                           @@@@@@@         @@@@@@                                                 \n    @@@@@        @@@@@                                           @@@@@@@         @@@@@@                                                 \n    @@@@@        @@@@@                                           @@@@@@@        @@@@@@@                                                 \n    @@@@@        @@@@@                                           @@@@@@@@       @@@@@@@                                                 \n    @@@@@        @@@@@                                           @@@@@@@@       @@@@@@@                                                 \n    @@@@@        @@@@@                                           @@@@@@@@      @@@@@@@@                                                 \n    @@@@@        @@@@@                                           @@@@ @@@@     @@@@@@@@                                                 \n    @@@@@@@@@@@@@@@@@@                                           @@@@ @@@@     @@@ @@@@                                                 \n    @@@@@@@@@@@@@@@@@@                                           @@@@ @@@@    @@@@ @@@@                                                 \n    @@@@@@@@@@@@@@@@@@                          @@               @@@@  @@@@   @@@@ @@@@       @@                                        \n    @@@@@@@@@@@@@@@@@@   @@@@@@@  @@@@@@@@    @@@@@@             @@@@  @@@@   @@@@ @@@@    @@@@@@@   @@@@@@@@  @@@  @@      @@@@@@@@    \n    @@@@@@@@@@@@@@@@@@   @@@@@@@  @@@  @@@   @@@  @@@            @@@@  @@@@  @@@@  @@@@    @@@  @@@  @@@  @@@  @@@  @@      @@@@@@@@    \n    @@@@@        @@@@@   @@       @@    @@   @@    @@@           @@@@   @@@@ @@@@  @@@@   @@@    @@  @@@   @@  @@@  @@      @@@         \n    @@@@@        @@@@@   @@       @@    @@  @@@     @@  @@@@@@   @@@@   @@@@ @@@   @@@@   @@     @@@ @@@   @@  @@@  @@      @@@         \n    @@@@@        @@@@@   @@@@@@@  @@@@@@@   @@@     @@  @@@@@@   @@@@   @@@@@@@@   @@@@   @@     @@@ @@@@@@@   @@@  @@      @@@@@@@     \n    @@@@@        @@@@@   @@@@@@@  @@@@@@@   @@@     @@  @@@@@@   @@@@    @@@@@@@   @@@@   @@     @@@ @@@   @@  @@@  @@      @@@@@@@     \n    @@@@@        @@@@@   @@       @@   @@@  @@@    @@@           @@@@    @@@@@@    @@@@   @@     @@  @@@   @@@ @@@  @@      @@@         \n    @@@@@        @@@@@   @@       @@    @@   @@@   @@            @@@@    @@@@@@    @@@@   @@@   @@@  @@@   @@@ @@@  @@      @@@         \n    @@@@@        @@@@@   @@@@@@@@ @@    @@@  @@@@@@@@            @@@@     @@@@@    @@@@    @@@@@@@   @@@@@@@@  @@@  @@@@@@@ @@@@@@@@    \n    @@@@@        @@@@@   @@@@@@@@ @@@   @@@    @@@@@             @@@@@    @@@@     @@@@     @@@@@    @@@@@@@   @@@  @@@@@@@ @@@@@@@@    \n                                                                                                                                        \n                                                                                                                                        \n ";console.log(n)}"object"==typeof e?defineReadOnlyProp(Hero,"__heroConfig",e):console.warn("Invalid Parameters: Parameters in @Component should be Object")}}function ViewWillAppear(e,t,n){return Hero.__viewWillAppear=e[t],n.writable=!1,n}function ViewWillDisappear(e,t,n){return Hero.__viewWillDisppear=e[t],n.writable=!1,n}function Boot(e,t,n){return Hero.__boot=e[t],n.writable=!1,n}function Message(e){var t=!0;return"function"!=typeof e&&"undefined"!=typeof e&&(console.warn("Invalid Usage of @Message("+e+")"),t=!1),function(n,o,r){return t&&Hero.__messageList.push({condition:!e||e,callback:n[o]}),r}}function getUI(){return window.ui}function getState(){return window.ui2Data}function setState(e){e&&"object"==typeof e&&Object.keys(e).forEach(function(t){window.ui2Data[t]=e[t]})}function __viewWillDisppearCallback(){Hero.__viewWillDisppear.call(_currentPage)}function __viewWillAppearCallback(){Hero.__viewWillDisppear.call(_currentPage)}var Hero=window.Hero={},_outObjects="",_currentPage=null;window.ui={},window.ui2Data={};var _deviceType="PC",emptyObject={view:""};!function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("hero-ios")!==-1?_deviceType="IOS":e.indexOf("hero-android")!==-1?_deviceType="ANDROID":e.indexOf("micromessenger")!==-1&&(_deviceType="WECHAT"),_deviceType}(),defineProp(Hero,"__heroConfig",{}),defineProp(Hero,"__boot",loop),defineProp(Hero,"__viewWillDisppear",loop),defineProp(Hero,"__viewWillAppear",loop),definePublicFreezeProp(Hero,"__viewWillDisppearCallback",__viewWillDisppearCallback),definePublicFreezeProp(Hero,"__viewWillAppearCallback",__viewWillAppearCallback),defineProp(Hero,"__beforeMessage",loop),defineProp(Hero,"__afterMessage",loop),defineReadOnlyProp(Hero,"__messageList",[]),definePublicFreezeProp(Hero,"boot",bootstrap),definePublicFreezeProp(Hero,"getState",getState),definePublicFreezeProp(Hero,"getUI",getUI),definePublicFreezeProp(Hero,"in",onMessage),definePublicFreezeProp(Hero,"out",sendMessage),definePublicFreezeProp(Hero,"outObjects",outObjects),definePublicFreezeProp(Hero,"resetUI",resetUI),definePublicFreezeProp(Hero,"setState",setState),definePublicFreezeProp(Hero,"updateView",view2Data),definePublicFreezeProp(Hero,"getDeviceType",getDeviceType),module.exports={Component:Component,Boot:Boot,Message:Message,ViewWillAppear:ViewWillAppear,ViewWillDisappear:ViewWillDisappear,BeforeMessage:BeforeMessage,AfterMessage:AfterMessage,Hero:Hero}},19:function(e,t){"use strict";function n(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function o(e,t){for(var n in t)e[n]=t[n];return e}function r(e,t){if(e){var n=e.indexOf(t);n>=0&&e.splice(n,1)}}function i(){localStorage.boot&&(p=JSON.parse(localStorage.boot),localStorage.boot=""),p=p||{};var e,t,n=(window.location.search.split("?")[1]||"").split("&");for(e in n)n.hasOwnProperty(e)&&(t=n[e].split("="),p[t[0]]=decodeURIComponent(t[1]||""));return p}function a(e,t){t=t>=0&&t<=20?t:2,e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(t)+"";var n,o=e.split(".")[0].split("").reverse(),r=e.split(".")[1],i="";for(n=0;n<o.length;n++)i+=o[n]+((n+1)%3===0&&n+1!==o.length?",":"");return i.split("").reverse().join("")+(r?"."+r:"")}function l(e,t){var n,o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(n in o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t}function u(e,t,n){return"undefined"==typeof n||0===+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!==0?NaN:t<0?-u(e,-t,n):(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))}function s(e,t){return u("round",e,t)}function c(e,t){return u("floor",e,t)}function f(e,t){return u("ceil",e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=null;t.default={remove:r,merge:o,contain:n,getInitData:i,fmoney:a,dataFormat:l,round10:s,floor10:c,ceil10:f}},118:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return{version:0,nav:{title:"单元测试"},views:[{class:"UIView",name:"parent",backgroundColor:"303e53",frame:{x:"0",y:"0",r:"0",h:"0.8x"}},{class:"HeroTextView",name:"test",frame:{x:"0",y:"0.81x",r:"0",h:"0.19x"}},{class:"HeroToast",name:"toast"}]}};t.default=n}});</script></head> <body> </body> </html> 